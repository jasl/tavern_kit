<%# Character Picker Selected Item %>
<%# locals: (character:) %>
<% is_global = character.user_id.nil? %>

<div class="flex items-center gap-3 p-2 bg-base-100 border border-base-300 rounded-box">
  <div class="avatar">
    <div class="w-9 rounded-full bg-base-200">
      <% if character.portrait.attached? %>
        <%= image_tag fresh_character_portrait_path(character),
                      class: "w-full h-full object-cover",
                      alt: character.name,
                      loading: "lazy" %>
      <% else %>
        <div class="w-full h-full flex items-center justify-center text-base-content/30">
          <span class="icon-[lucide--user] size-5"></span>
        </div>
      <% end %>
    </div>
  </div>

  <div class="min-w-0 flex-1">
    <div class="flex items-center gap-2 min-w-0">
      <div class="text-sm font-medium truncate" title="<%= character.name %>"><%= character.name %></div>
      <% if is_global %>
        <span class="badge badge-xs badge-ghost" title="<%= t("common.global", default: "Global") %>">
          <span class="icon-[lucide--globe] size-3"></span>
        </span>
      <% end %>
      <% if character.nsfw? %>
        <span class="badge badge-xs badge-error">NSFW</span>
      <% end %>
    </div>
  </div>

  <button type="button"
          class="btn btn-ghost btn-sm btn-circle text-error"
          title="<%= t("characters.picker.remove_selected", default: "Remove") %>"
          data-action="click->character-picker#removeSelected"
          data-character-id="<%= character.id %>">
    <span class="icon-[lucide--x] size-4"></span>
  </button>
</div>
