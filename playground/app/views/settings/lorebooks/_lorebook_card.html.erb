<%# Lorebook Card - Display in list view %>
<%# locals: (lorebook:) %>
<div id="lorebook-<%= lorebook.id %>" class="card bg-base-100 shadow-sm border border-base-300">
  <div class="card-body p-4">
    <!-- Header -->
    <div class="flex items-center justify-between">
      <div class="flex items-center gap-3">
        <h3 class="card-title text-lg">
          <%= link_to lorebook.name, edit_settings_lorebook_path(lorebook), class: "hover:text-primary transition-colors" %>
        </h3>
        <% if lorebook.recursive_scanning %>
          <span class="badge badge-outline badge-sm gap-1">
            <span class="icon-[lucide--repeat] size-3"></span>
            Recursive
          </span>
        <% end %>
      </div>
      <div class="flex items-center gap-2">
        <%= link_to export_settings_lorebook_path(lorebook), class: "btn btn-sm btn-ghost gap-1" do %>
          <span class="icon-[lucide--download] size-4"></span>
          <%= t("lorebooks.export", default: "Export") %>
        <% end %>
        <%= link_to edit_settings_lorebook_path(lorebook), class: "btn btn-sm btn-ghost gap-1" do %>
          <span class="icon-[lucide--pencil] size-4"></span>
          <%= t("common.edit", default: "Edit") %>
        <% end %>
      </div>
    </div>

    <!-- Description -->
    <% if lorebook.description.present? %>
      <p class="text-sm text-base-content/60 mt-2 line-clamp-2">
        <%= lorebook.description %>
      </p>
    <% end %>

    <!-- Details -->
    <div class="mt-3 grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
      <div>
        <span class="text-base-content/60"><%= t("lorebooks.entries", default: "Entries") %>:</span>
        <% entries_count = lorebook.respond_to?(:entries_count) ? lorebook.entries_count : lorebook.entries.count %>
        <span class="ml-2 font-medium"><%= entries_count %></span>
      </div>
      <div>
        <span class="text-base-content/60"><%= t("lorebooks.scan_depth", default: "Scan Depth") %>:</span>
        <span class="ml-2 font-mono"><%= lorebook.scan_depth.presence || t("lorebooks.default", default: "Default") %></span>
      </div>
      <div>
        <span class="text-base-content/60"><%= t("lorebooks.token_budget", default: "Token Budget") %>:</span>
        <span class="ml-2 font-mono"><%= lorebook.token_budget.present? ? number_with_delimiter(lorebook.token_budget) : t("lorebooks.unlimited", default: "Unlimited") %></span>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="mt-4 flex gap-2">
      <%= button_to duplicate_settings_lorebook_path(lorebook), method: :post, class: "btn btn-sm btn-outline gap-2" do %>
        <span class="icon-[lucide--copy] size-4"></span>
        <%= t("lorebooks.duplicate", default: "Duplicate") %>
      <% end %>
    </div>
  </div>
</div>
